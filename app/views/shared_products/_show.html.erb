<div class="container mx-auto my-8 px-4">
  <div class="max-w-3xl mx-auto">

    <div class="flex justify-between items-center mb-4">
      <h1 class="h3"><%= link_to product_model_plural, polymorphic_path(product_model.constantize) %> > <%= product_model %> #<%= product.id %></h1>
      <%= link_to 'Edit', edit_polymorphic_path(product), class: "btn btn-link" %>
    </div>

    <div class="bg-white rounded shadow p-8">

      <div class="mb-3">
        <%= render partial: "votable/collecting", locals: { collectable: product, collected_status: @collected_status } if (user_signed_in? && current_account.personal?) %>
      </div>

      <div id="product_image_gallery" style="max-width:80%;margin:auto">
      </div>

      <div class="mb-4">
        <% product.product_images.each do |product_image| %>
          <%= image_tag product_image.product_image_url %>
        <% end %>
      </div>

      <div class="mb-4">
        <h5>User</h5>
        <%= product.user.name %>
      </div>

      <div class="mb-4">
        <h5>Brand</h5>
        <%= product.brand.name %>
      </div>

      <div class="mb-4">
        <h5>Name</h5>
        <%= product.name %>
      </div>


      <div class="mb-4">
        <h5>Description</h5>
        <%= product.description %>
      </div>

      <div class="mb-4">
        <h5>Retail price</h5>
        <%= number_to_currency(product.retail_price) %>
      </div>


      <div class="mb-4">
        <h5>Type of</h5>
        <%= product.type_of %>
      </div>

      <% unless params[:controller] == "dresses" %>
        <div class="mb-4">
          <h5>Gender</h5>
          <%= product.gender %>
        </div>
      <% end %>

      <% unless params[:controller] == "cosmetics" || params[:controller] == "fragrances" %>
        <div class="mb-4">
          <h5>Material</h5>
          <%= product.materials %>
        </div>

        <div class="mb-4">
          <h5>Primary color</h5>
          <%= product.primary_color %>
        </div>

        <div class="mb-4">
          <h5>Secondary color</h5>
          <%= product.secondary_color %>
        </div>
      <% else %>
        <div class="mb-4">
          <h5>Ingredients</h5>
          <%= product.ingredients %>
        </div>
      <% end %>

      <div class="mb-4">
        <h5>Product url</h5>
        <%= product.product_url %>
      </div>

    </div>
  </div>
</div>

<script type="text/javascript">
  const myGallery = cloudinary.galleryWidget({
    container: "#product_image_gallery",
    cloudName: "caliber",
    mediaAssets: [
      {tag: "brands"} // by default mediaType: "image"
    ]
  });

  myGallery.render();
</script>
