<%= form_with(model: (params[:controller] == "reviews" ? [reviewable, commentable, Comment.new] : [commentable, Comment.new]), local: true, html: { data: { target: local_assigns[:target] }, class: local_assigns[:class] }) do |form| %>
  <%= render "shared/error_messages", resource: form.object %>

  <div class="form-group">
    <%= form.text_area :body, placeholder: "Your comment...", rows: 5, class: "form-control" %>
  </div>

  <%= form.hidden_field :parent_id, value: local_assigns[:parent_id] %>
  <%= form.hidden_field :deleted, value: false %>

  <%= form.submit "Post Comment", class: "btn btn-small btn-secondary outline" %>

  <%# if form.object.persisted? %>
    <%#= link_to 'Delete', form.object, class: "btn btn-danger outline", method: :delete, data: { remote: true, confirm: "Are you sure?" } %>
  <%# end %>

<% end %>

