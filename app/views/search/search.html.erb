<div class="my-6 overflow-hidden">
  <h1 class="mb-6 text-center"><%= fa_icon("fal fa-search", class: "mr-4") %> <span class="font-bold"><%= params[:q] %></span></h1>

  <hr>

  <% if @users.present? %>
    <h2>Users</h2>
    <div class="row col-lg-12">
      <table class="table table-striped table-hover table-sm-responsive">
        <thead>
          <tr>
            <th></th>

            <th>Name (Username)</th>
            <th>Current Status</th>
            <th>Type</th>
            <th>Followers</th>
          </tr>
        </thead>
        <tbody>
        <% @users.each do |user| %>

            <tr>

              <td class="text-center"><%= display_user_avatar(user, 60) %></td>
              <td><%= link_to("#{user.name.full} (#{user.username})", user_path(user)) %></td>
              <td></td>
              <td><%# account = determine_user_account_type(user) %><span class="badge badge-<%#= account[0] %>"><%#= account[1] %></span></td>
              <td></td>

              <%# console %>
            </tr>

          <% end %>
        </tbody>
      </table>
    </div>
    <hr>

  <% end # !@users.present? %>

  <h2 class="my-4 text-center">Products</h2>

  <% @sliced.each do |grouped_hash| %>
    <div class="flex justify-center -mx-2 overflow-x-auto">
      <% grouped_hash.each do |category_key, category_hash| %>
        <div class="w-12/25 px-2">
          <h3 class="text-center"><%= category_key %></h3>
          <div class="my-2 overflow-x-auto sm:-mx-6 sm:px-6 lg:-mx-8 lg:px-8">
            <div class="align-middle inline-block min-w-full shadow overflow-hidden sm:rounded-lg border-b border-gray-200">
              <table class="min-w-full">
                <thead>
                  <tr>
                    <th></th>
                    <th class="px-6 py-3 border-b border-gray-200 bg-gray-50 text-left text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider">
                      Name
                    </th>
                    <th class="px-6 py-3 border-b border-gray-200 bg-gray-50 text-left text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider">
                      Brand
                    </th>
                    <th class="px-6 py-3 border-b border-gray-200 bg-gray-50 text-left text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider">
                      Description
                    </th>
                  </tr>
                </thead>
                <tbody>
                  <% if category_hash.present? %>
                    <% category_hash.each do |product| %>
                      <tr class="<%= cycle('bg-white', 'bg-gray-50') %>">
                        <td><%#= determine_gender_sign(product) if product.model_name != "Dress" %></td>
                        <!-- <td class="px-6 py-4 whitespace-no-wrap"><%#= image_tag url_for(product.product_images.first) %></td> -->
                        <td class="px-6 py-4 whitespace-no-wrap text-sm leading-5 font-semibold text-gray-600"><%= link_to(product.name, polymorphic_path(product)) %></td>
                        <td class="px-6 py-4 whitespace-no-wrap text-sm leading-5 text-gray-600"><%= product.brand %></td>

                        <td class="px-6 py-4 whitespace-no-wrap text-sm leading-5 text-gray-600"><%= truncate(product.description, length: 50, omission: "...") %></td>
                        <%# console %>
                      </tr>
                    <% end # category_hash.each %>
                  <% else %>
                    <tr>
                      <td></td>
                      <td></td>
                      <td class='px-6 py-4 whitespace-no-wrap text-sm leading-5 font-medium text-gray-500'><%= "No #{category_key.downcase} found." %></td>
                      <td></td>
                    </tr>
                  <% end %> <!-- if category_hash.present? -->
                </tbody>
              </table>
            </div> <!-- class="align-middle inline-block min-w-full..." -->
          </div><!-- class="my-2 overflow-x-auto" -->
        </div><!-- class="w-12/25" -->
      <% end %>
    </div><!-- class="flex mx-auto overflow-x-auto" -->
  <% end %>


  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>


  <% if @guides.present? %>
  <br>
  <h2>Guides</h2>
  <div class="row">
    <div class="col-lg-12">
      <table class="table table-striped table-hover table-sm-responsive">
        <thead>
          <tr>
            <th></th>

            <th>Title</th>
            <th>Content</th>
            <th>Likes</th>
            <th>Written By</th>

          </tr>
        </thead>
        <tbody>
        <% @guides.each do |guide| %>

            <tr>

              <td><%= determine_guide_icon(guide) %></td>
              <td><%= link_to(guide.title, guide_path(guide)) %></td>
              <td></td>
              <td><%= link_to("#{guide.user.name.full} (#{guide.user.username})", user_path(guide.user)) %><% account = determine_user_account_type(guide.user) %><small><span class="badge badge-<%= account[0] %>"><%= account[1] %></span></small></td>
              <td></td>

              <%# console %>
            </tr>

          <% end %>
        </tbody>
      </table>
    </div>
  </div>
  <% end # if @guides.present? %>
</div>
<br>
<%# console %>
